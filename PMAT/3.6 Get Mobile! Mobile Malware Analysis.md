
<span style="color:blue;font-weight:bold">Preparation</span>
- We will need to install the Mobile Security Framework (MobSF)
- The docker container version can be found here: https://hub.docker.com/r/opensecurity/mobile-security-framework-mobsf
	- `docker pull opensecurity/mobile-security-framework-mobsf`
	- `docker run -it --rm -p 8000:8000 opensecurity/mobile-security-framework-mobsf:latest`
- One it shows `Listening at: http://0.0.0.0:8000` you can right-click that link and "Open Link" in browser to access the MobSF gui
- don't forget to remove REMnux box from the internet in the NIC settings if you changed those to download the MobSF container!

You'll need to transfer the malware sample over to the REMnux box with some python http server magic (`python -m http.server 8080`) and then GET request it from REMnux

**MobSF**
- "Upload & Analyze" the file to view a dashboard of malware information
- package name is `com.metasploit.stage`
- "Decompiled Code" section allows us to view the binary source code.  In this case it is written in Java, which decompiles very accurately because Java never actually compiles down to machine code (it compiles to byte code that is then interpreted by the Java VM #javagobrr)
- Click `</> View Source` to open the source code and we can pretty immediately see this is structured like a meterpreter payload![[Pasted image 20231127165019.png]]
- keep scrolling to the "Application Permissions" section
	- this malware sample can access the GPS `COARSE_LOCATION` and `FINE_LOCATION`, the `NETWORK_STATE`, `WIFI_STATE`, it can call numbers with `CALL_PHONE`, and access the `CAMERA` and `INTERNET`
- keep scrolling to the "Android API" section
	- we can see the calls made to the Android API to get a more granular understanding of what the malware actually does
	- `Execute OS Command` is here and we can actually click the file names on the right so pivot to exactly where in the code this takes place
	- `Get Cell Location` shows `meterpreter/CellCollector.java` which we can assume is a meterpreter class that calls the Android OS location API